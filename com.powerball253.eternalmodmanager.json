{
  "id" : "com.powerball253.eternalmodmanager",
  "runtime" : "org.freedesktop.Platform",
  "runtime-version" : "22.08",
  "sdk" : "org.freedesktop.Sdk",
  "sdk-extensions" : [
    "org.freedesktop.Sdk.Extension.dotnet7"
  ],
  "command" : "run.sh",
  "separate-locales" : false,
  "finish-args" : [
    "--share=ipc",
    "--socket=x11",
    "--share=network"
  ],
  "build-options" : {
    "append-path" : "/usr/lib/sdk/dotnet7/bin",
    "append-ld-library-path" : "/usr/lib/sdk/dotnet7/lib",
    "env" : {
      "PKG_CONFIG_PATH" : "/app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig:/usr/lib/sdk/dotnet7/lib/pkgconfig"
    }
  },
  "modules" : [
    {
      "name" : "eternalmodmanager",
      "buildsystem" : "simple",
      "sources" : [
        {
          "type" : "git",
          "url" : "https://github.com/PowerBall253/EternalModManager-Avalonia.git",
          "tag" : "v3.0.0",
          "commit" : "090c131d3dcfbc0a6622838e30b17c0d0b0e5f0e"
        },
        "sources.json",
        {
          "type" : "script",
          "dest-filename" : "run.sh",
          "commands" : [
            "/app/bin/dotnet /app/bin/EternalModManager.dll \"$@\""
          ]
        }
      ],
      "build-commands" : [
        "/usr/lib/sdk/dotnet7/bin/install.sh",
        "/usr/lib/sdk/dotnet7/bin/dotnet publish --source ./nuget-sources -c Release",
        "cp -r --remove-destination /run/build/eternalmodmanager/EternalModManager/bin/Release/net7.0/publish/* /app/bin/",
        "install -Dm755 run.sh /app/bin/run.sh",
        "install -Dm644 resources/eternalmodmanager.appdata.xml /app/share/metainfo/com.powerball253.eternalmodmanager.appdata.xml",
        "install -Dm644 resources/eternalmodmanager.png /app/share/icons/hicolor/256x256/apps/com.powerball253.eternalmodmanager.png",
        "sed -i 's/Icon=eternalmodmanager/Icon=com.powerball253.eternalmodmanager/g' resources/eternalmodmanager.desktop",
        "sed -i 's/Exec=eternalmodmanager/Exec=run.sh/g' resources/eternalmodmanager.desktop",
        "install -Dm644 resources/eternalmodmanager.desktop /app/share/applications/com.powerball253.eternalmodmanager.desktop",
        "install -Dm644 LICENSE /app/share/licenses/com.powerball253.eternalmodmanager/LICENSE"
      ]
    },
    {
      "name" : "st",
      "buildsystem" : "simple",
      "sources" : [
        {
          "type" : "git",
          "url" : "https://git.suckless.org/st",
          "tag" : "0.9",
          "commit" : "68d1ad9b54e952e3079356aeab8ab37e44c56c2c"
        }
      ],
      "build-commands" : [
        "CC=gcc make",
        "install -Dm755 st /app/bin/st"
      ]
    },
    {
      "name" : "xprop",
      "buildsystem" : "autotools",
      "sources" : [
        {
          "type" : "git",
          "url" : "https://gitlab.freedesktop.org/xorg/app/xprop.git",
          "tag" : "xprop-1.2.6",
          "commit" : "6d5cb0110b8b21ce94a52993e6e175266a4153fb"
        }
      ]
    }
  ]
}
